package main

import "testing"

func TestTreesEncountered(t *testing.T) {

	cases := []struct {
		input    []string
		slopes   []Slope
		expected int
	}{
		{
			input: []string{
				"..##.......",
				"#...#...#..",
				".#....#..#.",
				"..#.#...#.#",
				".#...##..#.",
				"..#.##.....",
				".#.#.#....#",
				".#........#",
				"#.##...#...",
				"#...##....#",
				".#..#...#.#",
			},
			slopes: []Slope{
				{Right: 3, Down: 1},
			},
			expected: 7,
		},
		{
			input: day3Input,
			slopes: []Slope{
				{Right: 3, Down: 1},
			},
			expected: 242,
		},
		{
			input: []string{
				"..##.......",
				"#...#...#..",
				".#....#..#.",
				"..#.#...#.#",
				".#...##..#.",
				"..#.##.....",
				".#.#.#....#",
				".#........#",
				"#.##...#...",
				"#...##....#",
				".#..#...#.#",
			},
			slopes: []Slope{
				{Right: 1, Down: 1},
				{Right: 3, Down: 1},
				{Right: 5, Down: 1},
				{Right: 7, Down: 1},
				{Right: 1, Down: 2},
			},
			expected: 336,
		},
		{
			input: day3Input,
			slopes: []Slope{
				{Right: 1, Down: 1},
				{Right: 3, Down: 1},
				{Right: 5, Down: 1},
				{Right: 7, Down: 1},
				{Right: 1, Down: 2},
			},
			expected: 2265549792,
		},
	}

	for i, c := range cases {
		actual := TreesEncountered(c.input, c.slopes)
		if actual != c.expected {
			t.Errorf("[case %d] expected: %d, actual: %d", i, c.expected, actual)
		}
	}
}

var day3Input = []string{
	"...........#..#.#.###....#.....",
	"...#..#...........#.#...#......",
	"#.....#..#........#...#..##....",
	"..#...##.#.....#.............#.",
	"#.#..#......#.....#....#.......",
	".....#......#..#....#.....#....",
	".......#.#..............#......",
	".....#...#..........##...#.....",
	"...#....#.#...#.#........#...#.",
	"..#.........###.......##...##..",
	".#....#...........#........#..#",
	"..#.............##.............",
	"..#.##.#....#................#.",
	".....##.#.......#....#...#.....",
	"......#.#....##................",
	"..#..........###..#..#.#..#....",
	"....#..............#....##..#.#",
	".#.........#.#....#.#.#....#...",
	"..#.....#......##.#....#.......",
	"..#.#....#..#.#...##....###....",
	"...#......##...#........#.#..#.",
	".##.#.......##....#............",
	"...##..#.#............#...#.#..",
	".##...##.#..#..................",
	"..#......##......#......##.....",
	".....##...#..#...#.........#...",
	".##.#.....#..#..#.##....##....#",
	"..#.#......#.......##..........",
	"......................#......##",
	"##.#...#.................#.#.#.",
	"......#.#..........#.....##.#..",
	"#.#......#.....#...........#...",
	".....#...#.......#..#..#.#...#.",
	"...........#......#.#...#......",
	"....##...##...........#......#.",
	".........#.##..................",
	"......#...#....#......##.##...#",
	"......#...#.#########......#...",
	".......#.#...#.......#..#......",
	"............#...#...#.###...##.",
	"...........#..........#...#....",
	"...#..#.#................#.#..#",
	"..#....#.....#.............#.#.",
	"....##......#........#....#....",
	"........##...............#....#",
	"........#..#...#..............#",
	"...#....#.#...#..#...#....#.#.#",
	".........#.......#....##.......",
	"#.##..............#.#........##",
	"......................###......",
	".........#....##..##....#.#.#..",
	".#...##.#.#...#....##..#.....#.",
	"....................#.#......#.",
	".#..#.......................#..",
	"..#..#.............#..#....#...",
	"...#...#..#...#...#.#..#.##....",
	"........#....#...#....#........",
	".#.....#........#.........#...#",
	"...#......#..#..#..####..#.....",
	"#....#..............#.##.......",
	".#....#.............##...#.....",
	"....#...#.##........##......#..",
	"##....#...#.......#..#........#",
	"....##........................#",
	"..................#..#.........",
	"..#....#........#..#.......#...",
	"#...#..#....#...##...........#.",
	".........#..#..#.#.##..........",
	"....#.#..#.....#..#.#.#.#..#.##",
	"##................#.##.....#...",
	".#.....###..#..#..#.....#....##",
	"...#...........#..........####.",
	".#.....#....#......#.##..#.#...",
	"..#...##....#................#.",
	"........#.......#......#.#.....",
	"....#.#.#.#....#...#......#..#.",
	"...........#......#..#.........",
	"###...##......##.#..#....##....",
	"##....##.........#..#....###...",
	"#.#.....#....#......#...#..##..",
	"#....##.#..............#.##....",
	".#........#.#.........#...#....",
	"......................#......#.",
	"........#..#..##.....#..#.#....",
	"..#...###.................#..#.",
	"...#...#............#..........",
	".##.......#..#.........#....#..",
	".#..............#....#....##...",
	"...............##..#.#.......##",
	".#.....#....#...#..#.......#..#",
	"#..#.............#....#......#.",
	".....#.#......#.........###..#.",
	".#...#.#...............#....#..",
	"#......#.............#.........",
	".#.##.#.####...#..#.##..#.....#",
	".....#......#..#...#.......#...",
	"#........###...#.....#..#.....#",
	"....#.#.....#...#..........#...",
	"...#.#.......#.#......#..#.##..",
	"..#..........#.#..#.......#.#..",
	"#...#.#..............#...###.#.",
	"...#..#...#............###.....",
	"..#..#...#.#............#..#...",
	".###.#.....................#..#",
	"....#....#..#.....##.##........",
	"#....#....#.#..#.........#.....",
	".#.....##....#............##..#",
	"#....#.#...#...#..#.#......#...",
	"#.....##.....##.....##.#...##..",
	"...##...#..#..####.#........#..",
	".........#...#......##..##..#..",
	"..#.....###.#..#..####.#.......",
	".......#......#...#..##....#...",
	".#.....#.#.#..#....#...#..##...",
	"..........#.#...#...#.#..#.....",
	"....#.....#........#.....##..#.",
	"..#.#.##.........#...##.....##.",
	".........#.##....#............#",
	"............##.....#.......#.#.",
	"......#.....#...#..#..###......",
	"##.....#.......#...##.#....#...",
	"...........##......#..##...#.#.",
	"..#.#.#.#...#.......#....#...#.",
	"#.............#.....#.#...###..",
	"##....#.......#.....#..##.#....",
	"...#.......#....#.........##...",
	"......#.......#......##.##.....",
	"..#......#...#.#........#......",
	"....#.#....#.#.##......#.....#.",
	"#......#.........#..#....#.....",
	"........#..#....##.....#.......",
	"#......##....#.##....#......#..",
	"..#.......#............##.....#",
	"...........#...#...........#...",
	"#.......#...#....#....#...#.#.#",
	"..###..#........#........#.....",
	"..#..###...........#.#......#..",
	".#...........#......#..........",
	".#.......#.....#.......#.......",
	"..#......##.#............#....#",
	"#..........#.....#.#..#........",
	".....#...##.##.......#......#..",
	"..........#.....#........#.#.#.",
	"....#......#.....#......#.#....",
	".........#.#.#..#...##....#...#",
	".........#.......#...##...#.#..",
	".##........#...............#...",
	".......#....#...........##.....",
	".........###......#.........#.#",
	"......#.......#...#..........#.",
	"...#.#..........##......#...#..",
	"#.......#.#..........#.........",
	"................#..#......#..##",
	".....#...#....#.#.....#........",
	"#.....#....#...........#....#..",
	"#....#.#..#...##....#...##.#...",
	"...#.....#......#.#....#..#..#.",
	"..#................#...#.#..##.",
	"..........#..............#..#.#",
	".....##.....#..#.###...........",
	"....#.#......#.#...........#...",
	".#....#.#.........##.#....#....",
	".#.#........#........###....#..",
	"##.#................#...#..#...",
	".......#......##..#.....#..#.#.",
	"...#............#......###...##",
	"#.#...........#.........#......",
	".....#.#.#.................#...",
	"....#..............#...#.#.....",
	"...#.#.....##..#...............",
	".#..##...#....##.....###..#....",
	"...............#...#...#.#.###.",
	".###....#.....#...#.#......#...",
	"...#..#.....#.......#..##.#....",
	"...........#..#....##..#...#...",
	"...#...#..........#.......##.#.",
	"............#.#.......#........",
	"....#.........#.....#..........",
	"...#.###.##..#...##..####..#..#",
	".#.#...#..#...................#",
	".....#..#.....##..#............",
	"....#......#...##..#.##........",
	"...#...............#..#.....##.",
	"...#......#.........#.#..##....",
	".#....#.##.......#......#......",
	"....#.......#....#..........#..",
	"#.#.#....###.#.#.............#.",
	"..##..###........#.#..#.#..#...",
	"......#.#............##.#...###",
	".........#.#....#####.....##...",
	"............##......#.#..#.....",
	"...#.....#.....###....#........",
	"##..........####.##.#.#........",
	"....................##.....##.#",
	"#.#............#........#......",
	"....#...##.....#......#....#...",
	"...###.#..##..................#",
	"..###......#..............#.#.#",
	".#...#...........#....#........",
	"....#............#..#..#.#.....",
	"...#.........#.#.........#.####",
	"..#...#...#...#...........#....",
	"...............#.#......##..#..",
	"#....#.#.......#.#..#......#..#",
	"........#.#....#..#...#..#...#.",
	"...#..#.......#...........#....",
	"...........#.......#...........",
	".#......#................#.....",
	"....#.#.#...#......#..#...#....",
	"................#.#.#....#.....",
	".........................##..#.",
	".#...........#............##...",
	"#...............#.....##.#.#..#",
	".........#.......###....#.....#",
	"....##...#...#.....#..#........",
	"........#.....#..#.#.#...#..#..",
	"......#.......#.#.........#.#..",
	"#......#............#...#....#.",
	"#..##...#..#................#..",
	".##...#...#.....#.##.......#..#",
	".......#.##........##..##......",
	"##.#..##...............#.....#.",
	"......#....#..##...#......###.#",
	"#........##..#....#.#......#...",
	".#......##.#...#.#...#.........",
	".#.#...#..#.............#......",
	".##..........#..........#......",
	".#.....#.....#..............#.#",
	"..#.........#..#.#.....#.#....#",
	"..#.##..............##...#..###",
	"....................#..........",
	"......###..#..#...........#....",
	"..#..........#.......#...#.....",
	"...#......#......#.............",
	"....##..............#.#.....#..",
	"........#.#......#..#........##",
	".............#...#.#.........##",
	"...###...#..........##.......#.",
	".#..........#...##..#.#.....#..",
	"##...#.........#...............",
	"......#....#....#.....#.....#..",
	"..........#....#...#...#..#...#",
	"...##....#.#.#..#...##.........",
	"#......#.#...##.###...#....#...",
	"##.......##.#......##..#...#...",
	"......#.............#.##.....##",
	"#.......###....####.#...##....#",
	"..#...#..#.......#..........#..",
	"#.....#..#..#..#.##...###...#..",
	".....##.#..#..#..#.#....#...#..",
	"..#...#..................##....",
	"....#.#........##..............",
	"#...#.......##...#...#.#.......",
	"..#...#........##....#.#.......",
	"..........###...###...#......#.",
	"#.....#..###...##...##..#..#..#",
	"..#.....##.....#.......##..#.#.",
	"........#........#.........#...",
	".................#....#.......#",
	".......#...#.....#...#.#.......",
	"....##...............#...##...#",
	".##...#................#...#...",
	".............#.................",
	".#..#....#....#.#....#.........",
	".#.#..#..........#.......#.....",
	".....##.....##...#..#..........",
	"#...#.#.........#......#..#....",
	"........#....#...#....#.#.##...",
	"....#..#........#...#...#......",
	".#..#.....#.#...#.........#....",
	".#..#..#...........#..#....#...",
	"....###.............#..#.......",
	"#......#..#..##..........#.#...",
	"#..#..#.##..#...#.#.#..........",
	"....###......#.##.....#....#...",
	".##..#...#......##.#...........",
	"..#..#.......#.....#.##....#.#.",
	".......#.#.#........#....##....",
	"..##...#....#...............###",
	"#..##..#...........#.#....##...",
	"...##..#.....................#.",
	"###......#....#....###..#...##.",
	".........##............#..#...#",
	"..#..........#...#.#.#......#.#",
	".......#.....##..##......#.##..",
	"#..........#.....##.#..........",
	"#.......#.#...#...#....#.......",
	"#...#.....##.......#.#..#.#.#..",
	".........#.#.#..#..#...#.###...",
	".................##...#....#...",
	"###.......#..........##...#....",
	"#.#..#.........#....##.#.......",
	"......#.#.....#........#.......",
	".......#.#........#......#.#..#",
	"..............#..#...##....#..#",
	"#...........#...##.....#..#.#..",
	"..#....#..#.#.#...#..#....#.#..",
	"...##.#.....#..#...##..#.....#.",
	"..#.#................#........#",
	"......#...#.............#......",
	".##............#....#...#..#...",
	"....#...#...........#.......#..",
	".###..#.......#.............#.#",
	".#.#....#.#...........#.#......",
	"...#.........#.........#..#....",
	"...#..........#.#.....#.#......",
	".....#........#....##......#...",
	"..#.#.#......#..#.#......#....#",
	".#.#..#................#.#.....",
	".#.#.........##...#.......#.#.#",
	"#..#.....#...#..#...........#..",
	"..##......####......#..#....###",
	"#.....###....#.#........#..#..#",
	"..##.#...#.#..##..........#..#.",
	"#.........#.#.............#...#",
	"...#.#...#...#.#.#....##.......",
	"##.##...#.....#...#...........#",
	"....#........#.#.....#.........",
	".................##..#..##...##",
	".....##....#...#...#.....#..#..",
	"....#...#........#............#",
	"..#...........##....#...#...##.",
	".....#......#.........#..##.#..",
}
